<page-header></page-header>
<main role="main" class="app-main">
<test-header scheduleStep='Choose a test' [testSchedule]="testScheduleModel"></test-header>
    <div class="section-medium-thin">
        <div class="container-medium-width">
            <p class="text-link-color margin-1em-top"><b>Choose by subject</b></p>
            <select #subjectDropDown id="testSubjectOptions" (load)="loadTests(subjectDropDown.value)" (change)="loadTests(subjectDropDown.value)"
            class="selectpicker" data-width="400" data-size="6" title='Choose a test by subject'>
                <option *ngFor="#subject of subjects; #i = index" [value]='subject.SubjectId'>{{subject.SubjectName}}</option>
            </select>
            <div [class.hidden]="tests?.length===0" class="margin-2em-top available-tests hidden clearfix" id="availableTests">
                <!--Form wont be added to the Dom until user makes selection-->
                <!--add min-height to top container instead or flex?-->
                <!--Wrapping form keeps datatable from becoming responsive for some reason-->
                <!---  <form action="schedule-test.html" id="availableTests" class="hidden">-->
                <!--  <form action="schedule-test.html">-->
                <p class="text-larger-teal">Available Tests (choose one)</p>
                <table id="chooseTestTable" class="table-with-cell-padding table-striped last-row-no-border">
                    <thead>
                        <tr>
                            <th scope="col">Test Name</th>
                            <th scope="col">Length</th>
                            <th scope="col" class="center">
                                No. of
                                <br> Questions
                            </th>
                            <th scope="col">Norming Status</th>
                            <th scope="col" class="center">
                                View Topical
                                <br> Blueprint (PDF)
                            </th>
                            <th scope="col" class="center">Select</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="#test of tests; #x = index">
                            <td>{{test.TestName}}</td>
                            <td>{{test.TimeLimit/60}} mins</td>
                            <td class="center">{{test.NumberOfQuestionsInTest}}</td>
                            <td>{{test.NormingStatusName}}</td>
                            <td class="center">
                                <a [attr.href]='test.TopicalBlueprintLink' target="_blank"><img src="images/pdf-icon@2x.png" class="pdf-icon" alt="open {{test.TestName}} Blueprint PDF"></a>
                            </td>
                            <td class="center">
                                <input type="radio" [checked]="test.TestId === testScheduleModel.testID"  (change)="selectTest(test.TestId,test.TestName, subjectDropDown.value);"
                                class="checkbox-image" [attr.id]="'rdb' + test.TestName|removewhitespace" [attr.aria-label]="'Choose ' + test.TestName" >
                                <label [attr.for]="'rdb' + test.TestName|removewhitespace"></label>
                            </td>
                        </tr>

                    </tbody>
                </table>
                <button type="submit" (click)="saveChooseTest()" id="chooseDate" class="button right margin-2em-top button-mobile-block"
                [disabled]=!testScheduleModel.testID>
                    Next step: Choose date and time
                </button>
                <!--</form>-->
            </div>
            <!--closes <div class="section available-tests">-->
            <!--</section>-->
          
        </div>
        <!--closes container-medium-width-->
    </div>
    <!--closes div section-->
</main>

<page-footer></page-footer>